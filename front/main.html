<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="http://localhost:3000/style/main.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <title>home</title>
</head>
<body style="background-color: #121212;">
    <div id="overlay" class="overlay">
        <a href="#" onclick="window.closeOverlay()"><h1>X</h1></a>
            <div class="container" style="background-color: #121212; border-radius: 25px; border: 1px solid white; padding: 1%;">
                    <h1 class="center header">options</h1>
                    <form action="/api/l/newLink" method="POST">
                        <h2>link:</h2>
                            <input id="fLink" class="textField" placeholder="https://yourlink.com" type="text" name="url">
                            <h2>id:</h2>
                            <input id="id" class="textField" placeholder="cool id" type="text" name="id">
                            <input value="generate link" type="submit" style="background-color: transparent; border: 1px solid white;">
                    </form>
            </div>
    </div>

    <div class="container">
        <h1 class="center header">shorten link</h1>
            <input id="link" class="textField" placeholder="https://yourlink.com" type="text" style="float: left; width: 90%; height: 30px !important;">
            <button onclick="window.shortenLink()" style="float:left; background-color: blue; height: 30px;">â†’</button>

        </div>
    <div id="snackbar">Some text some message..</div>
    <div class="footer">
            <div class="container">
                <ul class="navbar">
                    <li><a href="/user/login">login</a></li>
                    <li><a href="#repo">repo</a></li>
                </ul>
            </div>
        </div>
</body>
<script>
    window.snack = (msg) => {
        $("#snackbar").text(msg);
        $("#snackbar").addClass("show");
        setTimeout(() => {$("#snackbar").removeClass("show")},3000)
    }

    window.shortenLink = () => {
        let url = $("#link").val()
        if(!url) {
            window.snack("empty url field...")
            return;
        }
        $("#overlay").show();
        $("#fLink").val(url)
        $("#id").val(btoa(Math.floor(Math.random()*200).toString()))
    }

    window.closeOverlay = () => {
        $("#overlay").hide();
    }
</script>
</html>